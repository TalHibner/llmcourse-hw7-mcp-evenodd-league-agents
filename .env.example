# =============================================================================
# MCP Even/Odd League - Environment Configuration
# =============================================================================
# Copy this file to .env and customize the values for your environment.
# DO NOT commit .env to version control - it may contain sensitive data.
#
# Quick Start:
# 1. Copy: cp .env.example .env
# 2. Generate secret: python -c "import secrets; print(secrets.token_hex(32))"
# 3. Update LEAGUE_JWT_SECRET with generated value
# 4. Adjust other settings as needed
# =============================================================================

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
# Secret key for JWT token signing (REQUIRED for production)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
# Minimum length: 32 characters
# Default: auto-generated (INSECURE for production)
LEAGUE_JWT_SECRET=your-secret-key-here-minimum-32-characters-change-this-in-production

# JWT signing algorithm (default: HS256)
# Options: HS256, HS384, HS512
JWT_ALGORITHM=HS256

# Token expiration time in hours (default: 24)
# Recommended for production: 1-4 hours for better security
# Set to 0 for tokens that never expire (NOT RECOMMENDED)
JWT_EXPIRY_HOURS=24

# -----------------------------------------------------------------------------
# League Configuration
# -----------------------------------------------------------------------------
# Unique identifier for the league
# Used for data isolation and multi-league support
LEAGUE_ID=TEST_LEAGUE

# Maximum number of players allowed in the league
# Range: 2-100
MAX_PLAYERS=10

# Maximum concurrent matches that can run simultaneously
# Affects system load and referee allocation
# Range: 1-50
MAX_CONCURRENT_MATCHES=5

# Scoring system configuration
# WIN_POINTS: Points awarded for winning a match (default: 3)
# DRAW_POINTS: Points awarded for a draw (default: 1)
# LOSS_POINTS: Points awarded for losing (default: 0)
WIN_POINTS=3
DRAW_POINTS=1
LOSS_POINTS=0

# -----------------------------------------------------------------------------
# Network Configuration
# -----------------------------------------------------------------------------
# League Manager settings
LEAGUE_MANAGER_HOST=localhost
LEAGUE_MANAGER_PORT=8000

# Referee port range
# Referees will use ports starting from REFEREE_BASE_PORT
# Example: 8001, 8002, 8003, etc.
REFEREE_BASE_PORT=8001

# Player port range
# Players will use ports starting from PLAYER_BASE_PORT
# Example: 8101, 8102, 8103, etc.
PLAYER_BASE_PORT=8101

# Enable HTTPS (requires SSL certificates)
# Set to true for production deployments
ENABLE_HTTPS=false

# SSL certificate paths (required if ENABLE_HTTPS=true)
# SSL_KEYFILE=/path/to/private-key.pem
# SSL_CERTFILE=/path/to/certificate.pem

# -----------------------------------------------------------------------------
# Timeout Configuration
# -----------------------------------------------------------------------------
# HTTP request timeout in seconds (default: 30)
# Maximum time to wait for agent responses
REQUEST_TIMEOUT_SECONDS=30

# Join timeout in seconds (default: 5)
# Time limit for players to join a match after invitation
JOIN_TIMEOUT_SECONDS=5

# Move timeout in seconds (default: 30)
# Time limit for players to make a parity choice
MOVE_TIMEOUT_SECONDS=30

# Match timeout in seconds (default: 120)
# Total time limit for completing an entire match
MATCH_TIMEOUT_SECONDS=120

# -----------------------------------------------------------------------------
# Retry and Resilience Configuration
# -----------------------------------------------------------------------------
# Maximum number of retry attempts for failed requests
# Range: 0-10 (0 = no retries)
MAX_RETRIES=3

# Exponential backoff factor for retries
# Delay = backoff_factor * (2 ^ retry_count)
# Example: 2.0 gives delays of 2s, 4s, 8s
BACKOFF_FACTOR=2.0

# Circuit breaker failure threshold
# Number of consecutive failures before circuit opens
CIRCUIT_BREAKER_THRESHOLD=5

# Circuit breaker timeout in seconds
# Time to wait before attempting to close the circuit
CIRCUIT_BREAKER_TIMEOUT=60

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level (default: INFO)
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format (default: jsonl)
# Options: jsonl, json, text
LOG_FORMAT=jsonl

# Log retention in days (default: 30)
# Older logs will be archived/deleted
LOG_RETENTION_DAYS=30

# Enable detailed debug logging (default: false)
# WARNING: Generates large log files
DEBUG_MODE=false

# Log file size limit in MB (default: 100)
# Files will rotate when reaching this size
LOG_MAX_SIZE_MB=100

# Maximum number of log file backups (default: 5)
LOG_BACKUP_COUNT=5

# -----------------------------------------------------------------------------
# Performance and Monitoring
# -----------------------------------------------------------------------------
# Enable performance metrics collection (default: true)
ENABLE_METRICS=true

# Metrics export interval in seconds (default: 60)
METRICS_INTERVAL=60

# Enable request/response logging (default: false)
# WARNING: High performance impact
LOG_REQUESTS=false

# Enable slow query logging (default: true)
# Logs requests that exceed SLOW_QUERY_THRESHOLD
LOG_SLOW_QUERIES=true

# Slow query threshold in milliseconds (default: 1000)
SLOW_QUERY_THRESHOLD_MS=1000

# -----------------------------------------------------------------------------
# Data Storage Configuration
# -----------------------------------------------------------------------------
# Base directory for data storage (default: ./data)
DATA_DIR=./data

# Base directory for configuration files (default: ./config)
CONFIG_DIR=./config

# Base directory for logs (default: ./data/logs)
LOGS_DIR=./data/logs

# Enable data compression for archived files (default: true)
ENABLE_DATA_COMPRESSION=true

# Data backup interval in hours (default: 24)
# Set to 0 to disable automatic backups
BACKUP_INTERVAL_HOURS=24

# -----------------------------------------------------------------------------
# Development and Testing
# -----------------------------------------------------------------------------
# Enable development mode (default: false)
# Provides detailed error messages and auto-reload
DEV_MODE=false

# Enable auto-reload on code changes (default: false)
# Only works in development mode
AUTO_RELOAD=false

# Test mode (default: false)
# Uses in-memory storage and mock external services
TEST_MODE=false

# Mock MCP clients (default: false)
# Useful for testing without actual agent servers
MOCK_MCP_CLIENTS=false

# Enable API documentation (default: true)
# Swagger UI at /docs, ReDoc at /redoc
ENABLE_API_DOCS=true

# -----------------------------------------------------------------------------
# Game-Specific Configuration
# -----------------------------------------------------------------------------
# Random number range for Even/Odd game
# Drawn number will be between MIN_NUMBER and MAX_NUMBER (inclusive)
EVEN_ODD_MIN_NUMBER=0
EVEN_ODD_MAX_NUMBER=99

# Allow draws (default: true)
# If false, matches continue until there's a winner
ALLOW_DRAWS=true

# Maximum rounds per match (default: 1)
# For best-of-N formats, set to N
MAX_ROUNDS_PER_MATCH=1

# -----------------------------------------------------------------------------
# Rate Limiting (Production)
# -----------------------------------------------------------------------------
# Enable rate limiting (default: false)
# Recommended for production deployments
ENABLE_RATE_LIMITING=false

# Rate limit: requests per minute per IP
RATE_LIMIT_PER_MINUTE=60

# Rate limit: registration requests per hour per IP
REGISTRATION_RATE_LIMIT_PER_HOUR=10

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Enable CORS (Cross-Origin Resource Sharing)
ENABLE_CORS=false

# Allowed CORS origins (comma-separated)
# CORS_ORIGINS=http://localhost:3000,https://example.com

# Enable request signing (additional security layer)
ENABLE_REQUEST_SIGNING=false

# IP whitelist for admin endpoints (comma-separated)
# Empty = allow all IPs (NOT RECOMMENDED for production)
# ADMIN_IP_WHITELIST=127.0.0.1,192.168.1.0/24

# Enable audit logging for security events
ENABLE_AUDIT_LOGGING=true

# -----------------------------------------------------------------------------
# Advanced Configuration
# -----------------------------------------------------------------------------
# Worker processes for uvicorn (default: 1)
# Set to number of CPU cores for production
WORKER_PROCESSES=1

# Maximum request body size in MB (default: 10)
MAX_REQUEST_SIZE_MB=10

# Connection pool size for HTTP client (default: 100)
HTTP_POOL_SIZE=100

# DNS cache TTL in seconds (default: 300)
DNS_CACHE_TTL=300

# Enable HTTP/2 support (default: false)
ENABLE_HTTP2=false

# =============================================================================
# END OF CONFIGURATION
# =============================================================================
#
# Notes:
# - All time values are in seconds unless otherwise specified
# - All size values are in MB unless otherwise specified
# - Boolean values: true/false (case-insensitive)
# - Comments are ignored (lines starting with #)
# - Empty values use defaults
#
# For more information, see:
# - README.md (Configuration section)
# - SECURITY.md (Security best practices)
# - docs/API.md (API documentation)
# =============================================================================
